---
layout: default
title: "Graham Screener - Find Bargains with Margin of Safety"
description: "Benjamin Graham's value investing criteria. Find stocks trading below intrinsic value with strong balance sheets and dividend history."
permalink: /screeners/graham/
---

<section class="page-header screener-header">
  <div class="container">
    <div class="screener-title">
      <div class="screener-emoji">üìñ</div>
      <h1>The Graham Screener</h1>
      <p class="tagline">"In the short run, the market is a voting machine, but in the long run it is a weighing machine."</p>
      <p class="attribution">‚Äî Benjamin Graham</p>
    </div>
  </div>
</section>

<section class="screener-info">
  <div class="container">
    <div class="info-grid">
      <div class="info-main">
        <h2>Benjamin Graham's Philosophy</h2>
        <p>Benjamin Graham is known as the "Father of Value Investing." His 1949 book "The Intelligent Investor" is considered the bible of investing and was Warren Buffett's primary education.</p>
        
        <h3>Key Principles</h3>
        <ul>
          <li><strong>Mr. Market:</strong> The market is irrational - exploit its mood swings</li>
          <li><strong>Margin of Safety:</strong> Only buy when price is below intrinsic value</li>
          <li><strong>Quantitative Analysis:</strong> Focus on hard numbers, not stories</li>
          <li><strong>Defensive Investing:</strong> Protect capital first, grow it second</li>
          <li><strong>Diversification:</strong> Don't put all eggs in one basket</li>
        </ul>
        
        <div class="fun-fact">
          <h4>üí° Did You Know?</h4>
          <p>Graham taught Warren Buffett at Columbia Business School. Buffett says reading Graham's book was like "seeing the world in color for the first time."</p>
        </div>
      </div>
      
      <div class="info-sidebar">
        <div class="criteria-card">
          <h3>Screener Criteria</h3>
          <div class="criterion">
            <div class="criterion-name">P/E Ratio</div>
            <div class="criterion-value">< 15</div>
            <div class="criterion-desc">Earnings multiple</div>
          </div>
          <div class="criterion">
            <div class="criterion-name">P/B Ratio</div>
            <div class="criterion-value">< 1.5</div>
            <div class="criterion-desc">Price to book value</div>
          </div>
          <div class="criterion">
            <div class="criterion-name">Dividend Yield</div>
            <div class="criterion-value">> 3%</div>
            <div class="criterion-desc">Income component</div>
          </div>
          <div class="criterion">
            <div class="criterion-name">Current Ratio</div>
            <div class="criterion-value">> 2</div>
            <div class="criterion-desc">Liquidity measure</div>
          </div>
          <div class="criterion">
            <div class="criterion-name">Debt/Equity</div>
            <div class="criterion-value">< 1</div>
            <div class="criterion-desc">Conservative leverage</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="ticker-analyzer">
  <div class="container">
    <h2 class="section-title">üìä Analyze Any Stock</h2>
    <p class="section-description">Enter a ticker symbol to see how it measures up against Graham's criteria</p>

    <div class="analyzer-card">
      <div class="ticker-input-section">
        <div class="input-group">
          <input type="text" id="ticker-input" placeholder="Enter ticker (e.g., AAPL, MSFT, JPM)" maxlength="5">
          <button id="analyze-btn" class="btn btn-primary" onclick="analyzeStock()">
            <span id="btn-text">Analyze Stock</span>
            <span id="btn-loading" style="display: none;">Analyzing...</span>
          </button>
        </div>
        <p class="input-help">Try: AAPL, MSFT, JPM, KO, PG, or any US stock ticker</p>
        <div id="api-status" class="api-status"></div>
      </div>

      <div id="analysis-results" class="analysis-results" style="display: none;">
        <div class="result-header">
          <h3 id="company-name">Company Name</h3>
          <span id="result-ticker" class="result-ticker">TICKER</span>
        </div>

        <div class="metrics-grid">
          <div class="metric-card" data-metric="pe">
            <div class="metric-label">P/E Ratio</div>
            <div class="metric-value" id="metric-pe">--</div>
            <div class="metric-status" id="status-pe">Loading...</div>
            <div class="metric-target">Target: < 15</div>
          </div>

          <div class="metric-card" data-metric="pb">
            <div class="metric-label">P/B Ratio</div>
            <div class="metric-value" id="metric-pb">--</div>
            <div class="metric-status" id="status-pb">Loading...</div>
            <div class="metric-target">Target: < 1.5</div>
          </div>

          <div class="metric-card" data-metric="yield">
            <div class="metric-label">Dividend Yield</div>
            <div class="metric-value" id="metric-yield">--</div>
            <div class="metric-status" id="status-yield">Loading...</div>
            <div class="metric-target">Target: > 3%</div>
          </div>

          <div class="metric-card" data-metric="current">
            <div class="metric-label">Current Ratio</div>
            <div class="metric-value" id="metric-current">--</div>
            <div class="metric-status" id="status-current">Loading...</div>
            <div class="metric-target">Target: > 2</div>
          </div>

          <div class="metric-card" data-metric="debt">
            <div class="metric-label">Debt-to-Equity</div>
            <div class="metric-value" id="metric-debt">--</div>
            <div class="metric-status" id="status-debt">Loading...</div>
            <div class="metric-target">Target: < 1</div>
          </div>
        </div>

        <div class="overall-score">
          <div class="score-header">
            <h4>Graham Score</h4>
            <div class="score-value" id="graham-score">--/5</div>
          </div>
          <div class="score-bar">
            <div class="score-fill" id="score-fill" style="width: 0%"></div>
          </div>
          <p class="score-verdict" id="score-verdict">Enter a ticker to see results</p>
        </div>

        <div class="result-disclaimer">
          <p><strong>Demo Mode:</strong> This is an educational demonstration that generates realistic sample data. Results are based on the ticker symbol but do not reflect actual real-time financial metrics. In a production environment, this would connect to financial APIs like Alpha Vantage or Yahoo Finance. Always verify with official sources before making investment decisions.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="screener-demo">
  <div class="container">
    <h2 class="section-title">Example Results</h2>
    <p class="section-description">Companies matching Graham's criteria (for educational purposes only)</p>
    
    <div class="results-table-container">
      <div class="results-header">
        <span class="disclaimer-badge">üìö Educational Data</span>
        <span class="update-time">Updated: Delayed data for learning purposes</span>
      </div>
      
      <table class="results-table">
        <thead>
          <tr>
            <th>Company</th>
            <th>Ticker</th>
            <th>P/E</th>
            <th>P/B</th>
            <th>Yield</th>
            <th>Current</th>
            <th>Margin</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Bank of America</strong><br><span class="company-desc">Banking</span></td>
            <td class="ticker">BAC</td>
            <td class="metric good">12.4</td>
            <td class="metric good">1.1</td>
            <td class="metric good">2.9%</td>
            <td class="metric good">2.4</td>
            <td><span class="margin-badge high">High</span></td>
          </tr>
          <tr>
            <td><strong>Walgreens</strong><br><span class="company-desc">Pharmacy retail</span></td>
            <td class="ticker">WBA</td>
            <td class="metric good">8.2</td>
            <td class="metric good">1.2</td>
            <td class="metric good">4.8%</td>
            <td class="metric good">2.8</td>
            <td><span class="margin-badge high">High</span></td>
          </tr>
          <tr>
            <td><strong>Verizon</strong><br><span class="company-desc">Telecommunications</span></td>
            <td class="ticker">VZ</td>
            <td class="metric good">9.1</td>
            <td class="metric warn">1.8</td>
            <td class="metric good">6.7%</td>
            <td class="metric good">2.1</td>
            <td><span class="margin-badge moderate">Moderate</span></td>
      </tr>
    </tbody>
  </table>

  <div class="table-legend">
    <div class="legend-item">
      <span class="legend-dot good"></span>
      <span>Meets Criteria</span>
    </div>
    <div class="legend-item">
      <span class="legend-dot warn"></span>
      <span>Below Threshold</span>
    </div>
    <div class="legend-item">
      <span class="margin-badge high">High</span>
      <span>Strong margin of safety</span>
    </div>
  </div>
</div>

<div class="screener-actions">
      <a href="/screeners" class="btn btn-secondary">‚Üê Back to Screeners</a>
      <a href="/articles" class="btn btn-primary">Learn More About Graham</a>
    </div>
  </div>
</section>

<section class="learn-more">
  <div class="container">
    <h2>Deep Dive: Understanding Graham's Criteria</h2>

    <div class="criteria-explanations">
      <div class="explanation-card">
        <h3>üìà Mr. Market</h3>
        <p>Graham's famous "Mr. Market" parable illustrates how the market is irrational - treat it as a manic-depressive business partner:</p>
        <ul>
          <li><strong>Emotional Swings:</strong> Market prices swing wildly based on fear and greed</li>
          <li><strong>Exploit the Mood:</strong> Buy when he's depressed (low prices), sell when he's euphoric</li>
          <li><strong>Price vs Value:</strong> Focus on intrinsic value, not market sentiment</li>
          <li><strong>Opportunity Knocks:</strong> Market volatility creates buying opportunities</li>
          <li><strong>Long-term Focus:</strong> Eventually, value is recognized by the market</li>
        </ul>
      </div>

      <div class="explanation-card">
        <h3>üõ°Ô∏è Margin of Safety</h3>
        <p>Only buy when price is significantly below intrinsic value - this is the cornerstone of defensive investing:</p>
        <ul>
          <li><strong>Buffer Zone:</strong> Buy at 50-60% of estimated value</li>
          <li><strong>Protection Against Errors:</strong> Even if your analysis is wrong, you still profit</li>
          <li><strong>Downside Protection:</strong> Limits losses if things go wrong</li>
          <li><strong>Patience Required:</strong> Wait for the right price - don't chase</li>
          <li><strong>Quantitative:</strong> Based on hard numbers, not stories</li>
        </ul>
      </div>

      <div class="explanation-card">
        <h3>üë®‚Äçüè´ Graham's Influence</h3>
        <p>Benjamin Graham is the father of modern value investing - his teachings shaped the greatest investors:</p>
        <ul>
          <li><strong>The Intelligent Investor:</strong> Published 1949, still the bible of investing</li>
          <li><strong>Warren Buffett:</strong> Graham's student, followed his principles to billions</li>
          <li><strong>Security Analysis:</strong> Co-authored with David Dodd, foundational textbook</li>
          <li><strong>Focus on Data:</strong> Emphasize financial statements over speculation</li>
          <li><strong>Legacy:</strong> Influenced generations of successful investors</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<style>
.screener-header {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
}

.screener-title {
  text-align: center;
  color: white;
}

.screener-emoji {
  font-size: 4rem;
  margin-bottom: var(--spacing-md);
}

.screener-title h1 {
  color: white;
  margin-bottom: var(--spacing-md);
}

.tagline {
  font-size: 1.25rem;
  font-style: italic;
  opacity: 0.95;
  max-width: 600px;
  margin: 0 auto var(--spacing-sm);
}

.attribution {
  opacity: 0.8;
  font-size: 0.875rem;
}

.screener-info {
  padding: var(--spacing-3xl) 0;
}

.info-grid {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: var(--spacing-3xl);
}

.info-main h2 {
  margin-bottom: var(--spacing-lg);
}

.info-main p {
  color: var(--text-secondary);
  margin-bottom: var(--spacing-lg);
}

.info-main ul {
  margin-bottom: var(--spacing-xl);
}

.info-main li {
  margin-bottom: var(--spacing-sm);
}

.fun-fact {
  background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
  border-radius: var(--border-radius-lg);
  padding: var(--spacing-lg);
}

.fun-fact h4 {
  color: #166534;
  margin-bottom: var(--spacing-sm);
}

.fun-fact p {
  color: #14532d;
  margin: 0;
}

.criteria-card {
  background: var(--bg-card);
  border: 2px solid #10b981;
  border-radius: var(--border-radius-lg);
  padding: var(--spacing-xl);
  position: sticky;
  top: 6rem;
}

.criteria-card h3 {
  margin-bottom: var(--spacing-lg);
  color: #10b981;
}

.criterion {
  padding: var(--spacing-md) 0;
  border-bottom: 1px solid var(--border-color);
}

.criterion:last-child {
  border-bottom: none;
}

.criterion-name {
  font-weight: 600;
  font-size: 0.875rem;
  color: var(--text-secondary);
}

.criterion-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: #10b981;
  margin: var(--spacing-xs) 0;
}

.criterion-desc {
  font-size: 0.75rem;
  color: var(--text-muted);
}

.screener-demo {
  padding: var(--spacing-3xl) 0;
  background: var(--bg-secondary);
}

.section-description {
  text-align: center;
  color: var(--text-secondary);
  margin-bottom: var(--spacing-xl);
}

.results-table-container {
  background: var(--bg-card);
  border-radius: var(--border-radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-md);
}

.results-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-color);
}

.disclaimer-badge {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-muted);
}

.update-time {
  font-size: 0.75rem;
  color: var(--text-muted);
}

.results-table {
  width: 100%;
  border-collapse: collapse;
}

.results-table th {
  background: var(--bg-secondary);
  padding: var(--spacing-md);
  text-align: left;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-muted);
}

.results-table td {
  padding: var(--spacing-md);
  border-bottom: 1px solid var(--border-color);
}

.results-table tr:last-child td {
  border-bottom: none;
}

.company-desc {
  font-size: 0.75rem;
  color: var(--text-muted);
}

.ticker {
  font-family: var(--font-mono);
  font-weight: 600;
  color: var(--color-primary);
}

.metric {
  font-weight: 600;
}

.metric.good {
  color: #10b981;
}

.metric.warn {
  color: #f59e0b;
}

.margin-badge {\n  display: inline-block;
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
}

.margin-badge.high {
  background: #dcfce7;
  color: #166534;
}

.margin-badge.moderate {
  background: #fef3c7;
  color: #92400e;
}

.table-legend {
  display: flex;
  gap: var(--spacing-xl);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--bg-tertiary);
  border-top: 1px solid var(--border-color);
}

.legend-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: 0.75rem;
  color: var(--text-muted);
}

.legend-dot {
  width: 0.75rem;
  height: 0.75rem;
  border-radius: 50%;
}

.legend-dot.good {
  background: #10b981;
}

.legend-dot.warn {
  background: #f59e0b;
}

.screener-actions {
  display: flex;
  justify-content: center;
  gap: var(--spacing-md);
  margin-top: var(--spacing-2xl);
}

.learn-more {
  padding: var(--spacing-3xl) 0;
}

.learn-more h2 {
  text-align: center;
  margin-bottom: var(--spacing-2xl);
}

.criteria-explanations {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--spacing-xl);
}

.explanation-card {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius-lg);
  padding: var(--spacing-xl);
}

.explanation-card h3 {
  margin-bottom: var(--spacing-md);
}

.explanation-card p {
  color: var(--text-secondary);
  margin-bottom: var(--spacing-md);
}

.explanation-card ul {
  margin: 0;
}

.explanation-card li {
  margin-bottom: var(--spacing-sm);
}

@media (max-width: 1024px) {
  .info-grid {
    grid-template-columns: 1fr;
  }

  .criteria-card {
    position: static;
  }

  .table-legend {
    flex-wrap: wrap;
  }
}

@media (max-width: 768px) {
  .results-table {
    font-size: 0.875rem;
  }

  .results-table th,
  .results-table td {
    padding: var(--spacing-sm);
  }

  .screener-actions {
    flex-direction: column;
  }
}

/* Ticker Analyzer Styles */
.ticker-analyzer {
  padding: var(--spacing-3xl) 0;
  background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
}

.analyzer-card {
  background: var(--bg-card);
  border-radius: var(--border-radius-lg);
  padding: var(--spacing-2xl);
  box-shadow: var(--shadow-lg);
  max-width: 900px;
  margin: 0 auto;
}

.ticker-input-section {
  margin-bottom: var(--spacing-xl);
}

.input-group {
  display: flex;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-sm);
}

.input-group input {
  flex: 1;
  padding: 0.75rem 1rem;
  border: 2px solid var(--border-color);
  border-radius: var(--border-radius);
  background: var(--bg-primary);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 1.125rem;
  text-transform: uppercase;
  transition: border-color var(--transition-fast);
}

.input-group input:focus {
  outline: none;
  border-color: var(--color-primary);
}

.input-help {
  font-size: 0.875rem;
  color: var(--text-muted);
  margin: 0;
}

.api-status {
  margin-top: var(--spacing-sm);
  font-size: 0.875rem;
}

.api-status.error {
  color: var(--color-danger);
}

.api-status.success {
  color: var(--color-secondary);
}

.analysis-results {
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.result-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-xl);
  padding-bottom: var(--spacing-lg);
  border-bottom: 2px solid var(--border-color);
}

.result-header h3 {
  margin: 0;
  font-size: 1.5rem;
}

.result-ticker {
  background: var(--color-primary);
  color: var(--text-on-primary);
  padding: 0.25rem 0.75rem;
  border-radius: var(--border-radius);
  font-family: var(--font-mono);
  font-weight: 600;
  font-size: 0.875rem;
}

.metrics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
}

.metric-card {
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
  padding: var(--spacing-lg);
  border-left: 4px solid var(--border-color);
  transition: all var(--transition-fast);
}

.metric-card.pass {
  border-left-color: var(--color-secondary);
  background: rgba(16, 185, 129, 0.1);
}

.metric-card.fail {
  border-left-color: var(--color-danger);
  background: rgba(239, 68, 68, 0.1);
}

.metric-card.loading {
  border-left-color: var(--color-accent);
}

.metric-label {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: var(--spacing-xs);
}

.metric-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: var(--spacing-xs);
  font-family: var(--font-mono);
}

.metric-status {
  font-size: 0.875rem;
  font-weight: 600;
  margin-bottom: var(--spacing-sm);
}

.metric-status.pass {
  color: var(--color-secondary);
}

.metric-status.fail {
  color: var(--color-danger);
}

.metric-target {
  font-size: 0.75rem;
  color: var(--text-muted);
}

.overall-score {
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
  padding: var(--spacing-xl);
  margin-bottom: var(--spacing-lg);
}

.score-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-md);
}

.score-header h4 {
  margin: 0;
  font-size: 1.125rem;
}

.score-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-primary);
  font-family: var(--font-mono);
}

.score-bar {
  height: 8px;
  background: var(--border-color);
  border-radius: 9999px;
  overflow: hidden;
  margin-bottom: var(--spacing-md);
}

.score-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-danger) 0%, var(--color-accent) 50%, var(--color-secondary) 100%);
  border-radius: 9999px;
  transition: width 0.5s ease;
}

.score-verdict {
  font-size: 1rem;
  color: var(--text-secondary);
  margin: 0;
  font-style: italic;
}

.result-disclaimer {
  background: var(--color-warning-bg);
  border-left: 4px solid var(--color-warning-border);
  color: var(--color-warning-text);
  padding: var(--spacing-lg);
  border-radius: var(--border-radius);
  font-size: 0.875rem;
}

.result-disclaimer p {
  margin: 0;
}

@media (max-width: 768px) {
  .input-group {
    flex-direction: column;
  }

  .input-group input {
    width: 100%;
  }

  .metrics-grid {
    grid-template-columns: 1fr;
  }

  .result-header {
    flex-direction: column;
    align-items: flex-start;
  }
}
</style>

<script>
// Demo mode: Generate realistic metrics based on ticker hash
// This ensures the same ticker always shows the same "random" results
async function analyzeStock() {
  const tickerInput = document.getElementById('ticker-input');
  const ticker = tickerInput.value.trim().toUpperCase();

  if (!ticker) {
    showError('Please enter a ticker symbol');
    return;
  }

  // Reset and show loading
  resetResults();
  showLoading(true);
  hideError();

  // Simulate API delay for realism
  await new Promise(resolve => setTimeout(resolve, 800));

  // Generate realistic demo metrics based on ticker
  // Using a hash function so the same ticker always gives the same results
  const hash = ticker.split('').reduce((a, b) => {
    a = ((a << 5) - a) + b.charCodeAt(0);
    return a & a;
  }, 0);

  const seededRandom = (min, max) => {
    const x = Math.sin(hash + min) * 10000;
    return min + (x - Math.floor(x)) * (max - min);
  };

  // Company names mapping for common tickers
  const companyNames = {
    'AAPL': 'Apple Inc.',
    'MSFT': 'Microsoft Corporation',
    'GOOGL': 'Alphabet Inc.',
    'AMZN': 'Amazon.com Inc.',
    'TSLA': 'Tesla Inc.',
    'META': 'Meta Platforms Inc.',
    'NVDA': 'NVIDIA Corporation',
    'JPM': 'JPMorgan Chase & Co.',
    'V': 'Visa Inc.',
    'JNJ': 'Johnson & Johnson',
    'WMT': 'Walmart Inc.',
    'PG': 'Procter & Gamble',
    'KO': 'Coca-Cola',
    'DIS': 'Walt Disney',
    'NFLX': 'Netflix Inc.',
    'GME': 'GameStop Corp.',
    'AMC': 'AMC Entertainment',
    'BAC': 'Bank of America',
    'WBA': 'Walgreens Boots Alliance',
    'VZ': 'Verizon Communications'
  };

  const companyName = companyNames[ticker] || `${ticker} Corp.`;

  // Generate realistic metrics for Graham's criteria
  const pe = seededRandom(5, 35);
  const pb = seededRandom(0.5, 3.0);
  const yield_val = seededRandom(0, 8);
  const current = seededRandom(0.5, 4.0);
  const debt = seededRandom(0.1, 2.5);

  // Display results
  displayResults(ticker, companyName, {
    pe: pe,
    pb: pb,
    yield: yield_val,
    current: current,
    debt: debt
  });

  showLoading(false);
}

function displayResults(ticker, companyName, metrics) {
  const resultsDiv = document.getElementById('analysis-results');
  resultsDiv.style.display = 'block';

  // Update header
  document.getElementById('company-name').textContent = companyName;
  document.getElementById('result-ticker').textContent = ticker;

  // Evaluate each metric against Graham's criteria
  const evaluations = {
    pe: { value: metrics.pe, threshold: 15, pass: metrics.pe < 15 },
    pb: { value: metrics.pb, threshold: 1.5, pass: metrics.pb < 1.5 },
    yield: { value: metrics.yield, threshold: 3, pass: metrics.yield > 3 },
    current: { value: metrics.current, threshold: 2, pass: metrics.current > 2 },
    debt: { value: metrics.debt, threshold: 1, pass: metrics.debt < 1 }
  };

  // Update metric displays
  updateMetric('pe', evaluations.pe.value.toFixed(1), evaluations.pe.pass);
  updateMetric('pb', evaluations.pb.value.toFixed(2), evaluations.pb.pass);
  updateMetric('yield', evaluations.yield.value.toFixed(1) + '%', evaluations.yield.pass);
  updateMetric('current', evaluations.current.value.toFixed(1), evaluations.current.pass);
  updateMetric('debt', evaluations.debt.value.toFixed(2), evaluations.debt.pass);

  // Calculate overall score
  const score = Object.values(evaluations).filter(e => e.pass).length;
  const maxScore = 5;
  const percentage = (score / maxScore) * 100;

  // Update score display
  document.getElementById('graham-score').textContent = `${score}/${maxScore}`;
  document.getElementById('score-fill').style.width = `${percentage}%`;

  // Generate verdict
  let verdict = '';
  if (score === 5) verdict = 'üåü Excellent! This stock meets all of Graham\'s key criteria!';
  else if (score >= 4) verdict = '‚úÖ Good match! This stock meets most of Graham\'s criteria.';
  else if (score >= 3) verdict = '‚ö†Ô∏è Partial match. Some criteria are met, but not all.';
  else verdict = '‚ùå Doesn\'t match Graham\'s criteria well. Consider other options.';

  document.getElementById('score-verdict').textContent = verdict;

  // Scroll to results
  resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function updateMetric(metricName, value, passed) {
  const card = document.querySelector(`[data-metric="${metricName}"]`);
  const statusEl = document.getElementById(`status-${metricName}`);

  document.getElementById(`metric-${metricName}`).textContent = value;

  // Remove loading state
  card.classList.remove('loading');

  if (passed) {
    card.classList.add('pass');
    statusEl.textContent = '‚úì Pass';
    statusEl.classList.add('pass');
  } else {
    card.classList.add('fail');
    statusEl.textContent = '‚úó Below Target';
    statusEl.classList.add('fail');
  }
}

function resetResults() {
  // Reset all metric cards
  document.querySelectorAll('.metric-card').forEach(card => {
    card.classList.remove('pass', 'fail', 'loading');
    card.classList.add('loading');
  });

  // Reset status texts
  document.querySelectorAll('.metric-status').forEach(el => {
    el.textContent = 'Loading...';
    el.classList.remove('pass', 'fail');
  });

  // Reset metric values
  ['pe', 'pb', 'yield', 'current', 'debt'].forEach(metric => {
    document.getElementById(`metric-${metric}`).textContent = '--';
  });
}

function showLoading(show) {
  document.getElementById('btn-text').style.display = show ? 'none' : 'inline';
  document.getElementById('btn-loading').style.display = show ? 'inline' : 'none';
  document.getElementById('analyze-btn').disabled = show;
}

function showError(message) {
  const statusEl = document.getElementById('api-status');
  statusEl.textContent = '‚ùå ' + message;
  statusEl.className = 'api-status error';
}

function hideError() {
  const statusEl = document.getElementById('api-status');
  statusEl.textContent = '';
  statusEl.className = 'api-status';
}

// Allow Enter key to trigger analysis
document.addEventListener('DOMContentLoaded', function() {
  const tickerInput = document.getElementById('ticker-input');
  if (tickerInput) {
    tickerInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        analyzeStock();
      }
    });
  }
});
</script>
